{"title":"iOS中webview和wkwebview获取网页title的方式","date":"2019-03-29T02:17:19.000Z","slug":"iOS中webview和wkwebview获取网页title的方式","updated":"2019-03-29T02:19:21.319Z","content":"<p>UIWebView获取title的方式</p>\n<pre><code>在代理webViewDidFinishLoad方法中\n-(void) webViewDidFinishLoad:(UIWebView *)webView {  \n[UIApplicationsharedApplication].networkActivityIndicatorVisible =NO;  \nself.title ＝  [webView stringByEvaluatingJavaScriptFromString:@&quot;document.title&quot;];//获取当前页面的title  \n}\n</code></pre><a id=\"more\"></a>\n<p>WKWebView获取title的方式比较复杂点<br>1.wkWebView初始化完毕笔后设置代理并添加观察者</p>\n<pre><code>例如：\n_wkWebView.UIDelegate = self;\n[_wkWebView addObserver:self forKeyPath:@&quot;title&quot; options:NSKeyValueObservingOptionNew context:NULL];\n</code></pre><p>2.实现代理</p>\n<pre><code>//WkWebView的 回调\n-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{\n    if ([keyPath isEqualToString:@&quot;title&quot;]) {\n        if (object == self.wkWebView) {\n            self.title = self.wkWebView.title;\n        } else {\n            [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];\n        }\n    } else {\n        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];\n\n    }\n\n}\n</code></pre><p>3.移除代理</p>\n<pre><code>- (void)dealloc{\n    [_wkWebView removeObserver:self forKeyPath:@&quot;title&quot;];\n}\n</code></pre>","prev":{"title":"hexo 多终端同步博客","slug":"hexo-多终端同步博客"},"next":{"title":"用masonry自适应label高度和宽度","slug":"用masonry自适应label高度和宽度"},"link":"http://yoursite.com/post/iOS中webview和wkwebview获取网页title的方式/"}