{"title":"iOS中圆角与阴影并存","date":"2019-04-12T06:48:23.000Z","slug":"iOS中圆角与阴影并存","updated":"2019-04-12T06:51:52.897Z","content":"<p>圆角和阴影无法共存的原因就是因为这句代码。Because shadow is an effect done outside the View, and that masksToBounds set to YES will tell the UIView not to draw everything that is outside itself.<br>这句话的意思就是，圆角都是我给你割出来的，圆角外面的阴影自然也割掉了~</p>\n<p>所以，这么看来，圆角与阴影不能并存啊（仅限这种圆角实现的方式）</p>\n<p>解决：<br>CALayer可以完成视图上的所有UI操作，那我们把CALayer当成一个视图加到view上，所以分为两步实现</p>\n<a id=\"more\"></a>\n<p>第一种方式：</p>\n<p>1：将需要操作的self.bg_view直接设置为圆角</p>\n<pre><code>self.bg_view.layer.cornerRadius = 6;\nself.bg_view.layer.masksToBounds = YES;\n</code></pre><p>2：创建CALayer并添加到self.bg_view的父视图上（放在self.bg_view的下层）</p>\n<pre><code>CALayer *subLayer=[CALayer layer];\nCGRect fixframe = self.bg_view.frame;\nsubLayer.frame= fixframe;\nsubLayer.cornerRadius=6;\nsubLayer.backgroundColor=[[UIColor blackColor] colorWithAlphaComponent:0.8].CGColor;\nsubLayer.masksToBounds=NO;\nsubLayer.shadowColor = [UIColor blackColor].CGColor;//shadowColor阴影颜色\nsubLayer.shadowOffset = CGSizeMake(3,2);//shadowOffset阴影偏移,x向右偏移3，y向下偏移2，默认(0, -3),这个跟shadowRadius配合使用\nsubLayer.shadowOpacity = 0.8;//阴影透明度，默认0\nsubLayer.shadowRadius = 4;//阴影半径，默认3\n[self.layer insertSublayer:subLayer below:self.bg_view.layer];\n</code></pre><p>第二种方式：<br>直接对控件的layer进行操作</p>\n<pre><code>self.layer.cornerRadius = 30;\nself.layer.shadowColor = [UIColor blackColor].CGColor;\nself.layer.shadowOffset = CGSizeZero;\nself.layer.shadowOffset = CGSizeMake(3,2);//shadowOffset阴影偏移,x向右偏移3，y向下偏移2，默认(0, -3),这个跟shadowRadius配合使用\nself.layer.shadowOpacity = 0.3; //阴影透明度，默认0\nself.layer.shadowRadius = 5; //阴影半径，默认3\n</code></pre>","next":{"title":"<__NSArrayM:XXXXXX> was mutated while being enumerated.","slug":"NSArrayM-XXXXXX-was-mutated-while-being-enumerated"},"link":"http://yoursite.com/post/iOS中圆角与阴影并存/"}