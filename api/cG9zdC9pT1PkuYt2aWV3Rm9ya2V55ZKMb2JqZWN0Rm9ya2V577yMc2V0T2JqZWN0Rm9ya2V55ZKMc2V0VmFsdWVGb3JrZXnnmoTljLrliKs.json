{"title":"iOS之viewForkey和objectForkey，setObjectForkey和setValueForkey的区别","date":"2019-04-02T14:08:23.000Z","slug":"iOS之viewForkey和objectForkey，setObjectForkey和setValueForkey的区别","updated":"2019-04-08T13:17:06.133Z","content":"<p>1、viewForkey和objectForkey的区别</p>\n<p>objectForKey: returns the value associated with aKey, or nil if no value is associated with aKey. 返回指定 key 的 value，若没有这个 key 返回 nil.<br>valueForKey: returns the value associated with a given key. 同样是返回指定 key 的 value。<br>但文档里 valueForKey: 有额外一点：一般来说 key 可以是任意字符串组合，如果 key 不是以 @ 符号开头，这时候 valueForKey: 等同于 objectForKey:，如果是以 @ 开头，那么 valueForKey:会去掉 key 里的 @ 然后用剩下部分作为 key 执行 [super valueForKey:]。<br>比如：</p>\n<a id=\"more\"></a>\n<pre><code>NSDictionary *dict = [NSDictionary dictionaryWithObject:@&quot;theValue&quot;\n\nforKey:@&quot;theKey&quot;];\n\nNSString *value1 = [dict objectForKey:@&quot;theKey&quot;];\n\nNSString *value2 = [dict valueForKey:@&quot;theKey&quot;];\n\n\n这时候 value1 和 value2 是一样的结果。如果是这样一个 dict：\n\nNSDictionary *dict = [NSDictionary dictionaryWithObject:@&quot;theValue&quot;\n\nforKey:@&quot;@theKey&quot;];// 注意这个 key 是以 @ 开头\n\nNSString *value1 = [dict objectForKey:@&quot;@theKey&quot;];\n\nNSString *value2 = [dict valueForKey:@&quot;@theKey&quot;];\n\n\nvalue1 可以正确取值，但是 value2 取值会直接 crash 掉，报错信息：\n\nTerminating app due to uncaught exception ‘NSUnknownKeyException’, reason: ‘[&lt;__NSCFDictionary 0x892fd80&gt; valueForUndefinedKey:]: this class is not key value coding-compliant for the key theKey.’\n</code></pre><p>这是因为 valueForKey: 是 KVC(NSKeyValueCoding) 的方法，在 KVC 里可以通过 property 同名字符串来获取对应的值。找不到值的时候执行 valueForUndefinedKey:，而 valueForUndefinedKey: 的默认实现是抛出 NSUndefinedKeyException 异常。</p>\n<p>2、setObjectForkey和setValueForkey的区别<br>setObject:forKey: 是NSMutableDictionary类的方法,key参数类型可以是任意类型对象, value不能为nil，不然会报错。<br>setValue:forKey: 是NSObject类的方法也就是说所有的OC对象都有这个方法， key值必须是字符串，value可以为nil，但是当value为空时，会自动调用removeObject:forKey方法</p>\n<pre><code>1、注意：setObject：forKey：对象不能存放nil要与下面的这种情况区分：\n\n    [imageDictionary setObject:[NSNull null]  forKey:indexNumber];\n    [NSNull null]表示的是一个空对象，并不是nil，注意这点\n\n2、setObject：forKey：中Key是NSNumber对象的时候，如下：\n    [imageDictionary setObject:obj forKey:[NSNumber numberWithInt：10]];\n</code></pre>","prev":{"title":"iOS如何定位Masonry约束报错的控件","slug":"iOS如何定位Masonry约束报错的控件"},"next":{"title":"iOS中求出UILabel中文字的行数以及每一行的内容","slug":"iOS中求出UILabel中文字的行数以及每一行的内容"},"link":"http://yoursite.com/post/iOS之viewForkey和objectForkey，setObjectForkey和setValueForkey的区别/"}